<!DOCTYPE html>
<html>
<head>
  <title>App</title>
</head>
<body>

<h2>Welcome</h2>
<p id="userEmail"></p>
<button id="logoutBtn">Logout</button>

<script type="module">
import { supabase } from './supabase.js'

// Protect page
const { data: { session } } = await supabase.auth.getSession()
if (!session) window.location.href = 'login.html'

// Show user email
document.getElementById('userEmail').textContent = session.user.email

// Logout
document.getElementById('logoutBtn').onclick = async () => {
  await supabase.auth.signOut()
  window.location.href = 'login.html'
}
</script>

</body>
</html>
