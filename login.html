<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
</head>
<body>
<h2>Login</h2>

<input id="email" placeholder="Email" />
<br><br>
<input id="password" type="password" placeholder="Password" />
<br><br>

<button id="loginBtn">Login</button>
<button id="signupBtn">Sign Up</button>

<p id="message"></p>

<script type="module">
import { supabase } from './supabase.js'

const email = document.getElementById('email')
const password = document.getElementById('password')
const message = document.getElementById('message')

// Redirect if already logged in
const { data: { session } } = await supabase.auth.getSession()
if (session) window.location.href = 'app.html'

// LOGIN
document.getElementById('loginBtn').onclick = async () => {
  message.textContent = 'Logging in...'
  const { error } = await supabase.auth.signInWithPassword({
    email: email.value,
    password: password.value
  })
  if (error) message.textContent = error.message
  else window.location.href = 'app.html'
}

// SIGNUP
document.getElementById('signupBtn').onclick = async () => {
  message.textContent = 'Signing up...'
  const { error } = await supabase.auth.signUp({
    email: email.value,
    password: password.value
  })
  if (error) message.textContent = error.message
  else message.textContent = 'Signup successful. You can now log in.'
}
</script>
</body>
</html>
